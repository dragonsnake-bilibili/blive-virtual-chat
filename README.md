# BLive Virtual Chat: Bilibili 虚拟弹幕姬

这是一个对 Bilibili 直播中常见弹幕呈现工具的模仿

## 这是干啥的？

在进行直播视频剪辑（人话：切片）时，可能会遇到需要展示弹幕直播时弹幕的情形。然而在实际处理中可能还会一并遇到这些情况：

- 弹幕在画面中的占比小，需要放大展示，可一旦放大又很容易糊成一团；
- 一些主播直接不在直播画面中显示普通弹幕，有的人想放大还没得放呢；
- 弹幕跑得太快或是想要连续呈现的弹幕实际视频中不是连续的，剪辑起来不自然和费时间总得选一个；
- 想移动一下弹幕位置可是背景太乱只能带着背景硬放，或者背景很纯但色键一上毛边就来了

## 功能特性

- 高度可定制，以下属性均可配置
  - 全局设置（对全局场景或所有弹幕条目生效）
    - 场景背景（仅支持纯色，支持设置透明度）
    - 场景尺寸（宽高）
    - 弹幕间距
    - 录制时渲染帧率
    - 弹幕位置调整时长（在新弹幕进入场景之前现有弹幕调整自身位置为其让出空间的动画的持续时长）
    - 弹幕入场时长（新弹幕入场动画持续时长）
    - 弹幕字体/头像/徽章/表情尺寸
    - 预览/录制开始前等待时间（呈现空场景）
    - 预览/录制开始后保持事件（呈现场景最终状态）
  - 弹幕设置（每个弹幕独立配置）
    - 入场时刻（此时刻开始现有弹幕位置调整动画，紧接开始入场动画）
    - 用户名
    - 用户徽章（房管、舰长等）
    - 用户头像
    - 弹幕内容（支持表情和定长空白，工具包含内建表情选择器，详见[弹幕内容编辑器](#弹幕内容编辑器)）
- （计划）支持多种预设主题样式，详见[主题支持](#主题支持)
- 可在渲染前基于网页动画快速预览（注意预览效果与最终渲染结果可能存在细微差别）
- 可渲染透明背景视频，在剪辑工具中无需任何色键等后期处理直接按层次叠加呈现（需要剪辑工具支持，目前应该已较为广泛）
- 精确渲染结果，与配置尺寸等保持像素级严格一致
- 支持较为精确（指使用JavaScript标准浮点数计算，未对浮点误差做特殊控制）的任意帧率渲染
- 支持配置和内容的导出与导入

### 主题支持

主题系统用以支持以不同风格样式结构呈现相同的弹幕内容，并可在不同配置之间快速切换。

#### 现有主题

##### 仿聊天气泡

![仿聊天气泡](./images/theme-chat-bubble.png)

#### 架构设计

_如果你没有为此工具贡献代码、调试或进行二次开发的需求，通常不需要阅读这一节内容。_

### 弹幕内容编辑器

## 使用方式
